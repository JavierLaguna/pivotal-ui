<!doctype html>
<html lang="en">
  <head>
    <title>a brand new styleguide: <%= title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <% require('json') %>
    <% def asset_path(filename)
        json = JSON.parse(File.read("config/#{ENV['NODE_ENV']}.json"))
        asset_root_parts = [json['assetHost'], json['assetPort']].compact
        asset_root = asset_root_parts.empty? ? nil : asset_root_parts.join(':')
        File.join([asset_root, filename].compact)
      end
    %>
    <link rel="stylesheet" href="<%= asset_path('pivotal-ui.css') %>">
    <link rel="stylesheet" href="<%= asset_path('styleguide/styleguide.css') %>">
    <link rel="stylesheet" href="<%= asset_path('styleguide/github.css') %>">
    <link rel="stylesheet" disabled href="<%= asset_path('prismjs/prism.css') %>">
    <link rel="stylesheet" href="<%= asset_path('prismjs/prism-okaidia.css') %>">
    <link rel="shortcut icon" href="<%= asset_path('styleguide/favicon.ico') %>" type="image/x-icon">
    <script>
      var _prum = [['id', '5591b4ebabe53d4955475a76'],
        ['mark', 'firstbyte', (new Date()).getTime()]];
      (function() {
        var s = document.getElementsByTagName('script')[0]
                , p = document.createElement('script');
        p.async = 'async';
        p.src = '//rum-static.pingdom.net/prum.min.js';
        s.parentNode.insertBefore(p, s);
      })();
    </script>

    <% if file_name == 'react.html' %>
      <script src="<%= asset_path('pivotal-ui-react.js') %>"></script>
      <script>
        if (window.callPhantom) {
          (function() {
            var firstScript = document.getElementsByTagName('script')[0];
            var reactA11yScript = document.createElement('script');
            reactA11yScript.async = 'async';
            reactA11yScript.src = 'react-a11y-script.js';
            firstScript.parentNode.insertBefore(reactA11yScript, firstScript);
          })();
        }
      </script>
      <script src="http://fb.me/JSXTransformer-0.12.0.js"></script>
    <% else %>
      <script src="<%= asset_path('pivotal-ui.js') %>"></script>
    <% end %>
    <script src="<%= asset_path('zeroclipboard/ZeroClipboard.js') %>"></script>
    <script src="<%= asset_path('styleguide/styleguide.js') %>"></script>

    <script>

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){

        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),

              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)

      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39702075-1', 'auto');

      ga('send', 'pageview');

    </script>
  </head>
  <body>
    <nav class="styleguide-header">
      <div class="container">
        <button id="navbar-hamburger">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="styleguide-logo"><img src="<%= asset_path('styleguide/pui-logo@2x.png') %>" alt="Introduction to Pivotal UI" height="28px"></a>
        <div id="styleguide-first-level-nav-wrapper">
          <ul id="styleguide-first-level-nav">

            <% categories = ['Layout', 'Elements', 'Objects', 'Utilities', 'Forms', 'by Product', 'React'] %>


            <% categories.each_with_index do |category_name, index| %>
              <%= "\"#{category_name}\" CATEGORY NOT FOUND ERROR, fool." unless @categories.has_key?(category_name) %>
              <% file_name = @categories[category_name] %>

              <li id="category-<%= index %>" class="styleguide-category">
                <a class="category-link" href="<%= file_name %>">
                  <%= category_name %>
                </a>
                <a class="styleguide-second-level-nav-link" href="#" data-target="category-<%= index %>">
                  <span class="sr-only">Expand <%= category_name %></span>
                  <i class="fa fa-chevron-down"></i>
                </a>
                <ul class="styleguide-second-level-nav">
                  <% @pages[file_name][:blocks].each do |b| %>
                    <% if (b[:categories].include?(category_name)) && (b[:parent] == nil) %>
                      <% if file_name == @file_name %>
                        <li><a href="#<%= b[:name] %>" class="styleguide-subsection"><%= b[:title] %></a></li>
                      <% else %>
                        <li><a href="<%= file_name %>#<%= b[:name] %>"><%= b[:title] %></a></li>
                      <% end %>
                    <% end %>
                  <% end %>
                </ul>
              </li>
            <% end %>
            <li>
              <a class="category-link" href="all.html">All</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="now-hiring bg-accent-3 pbn">
      <div class="bg-shadow-1 pvl">
        <a class="active" href="/hiring.html" style="display: block;">
          <h1 class="type-neutral-11 mvn h4 txt-c">
            <span>Pivotal is now hiring</span>
            <span class="em-high"> Product Designers</span>.
            <span class="">Learn More.</span>
          </h1>
        </a>
      </div>
    </div>
    <% if title != "Intro" %>
      <div class="container ptl">
        <section class="content">
    <% end %>


